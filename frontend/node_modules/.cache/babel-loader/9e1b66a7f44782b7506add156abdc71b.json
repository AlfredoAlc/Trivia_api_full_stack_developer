{"ast":null,"code":"var _jsxFileName = \"/Users/aar92_22/Desktop/Udacity/Full_Stack_Developer/FSND/projects/02_trivia_api/starter/frontend/src/components/QuestionView.js\";\nimport React, { Component } from 'react';\nimport '../stylesheets/App.css';\nimport Question from './Question';\nimport Search from './Search';\nimport $ from 'jquery';\n\nclass QuestionView extends Component {\n  constructor() {\n    super();\n\n    this.getQuestions = () => {\n      $.ajax({\n        url: \"/questions?page = \".concat(this.state.page),\n        type: \"GET\",\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            categories: result.categories,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load questions. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.getByCategory = id => {\n      $.ajax({\n        url: \"/categories/\".concat(id, \"/questions\"),\n        //TODO: update request URL\n        type: \"GET\",\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load questions. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.submitSearch = searchTerm => {\n      $.ajax({\n        url: \"/questions\",\n        //TODO: update request URL\n        type: \"POST\",\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          searchTerm: searchTerm\n        }),\n        xhrFields: {\n          withCredentials: true\n        },\n        crossDomain: true,\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          message: error.message;\n\n          alert('Unable to load questions. Please try your request again', message);\n          return;\n        }\n      });\n    };\n\n    this.questionAction = id => action => {\n      if (action === 'DELETE') {\n        if (window.confirm('are you sure you want to delete the question?')) {\n          $.ajax({\n            url: \"/questions/\".concat(id),\n            //TODO: update request URL\n            type: \"DELETE\",\n            success: result => {\n              this.getQuestions();\n            },\n            error: error => {\n              alert('Unable to load questions. Please try your request again');\n              return;\n            }\n          });\n        }\n      }\n    };\n\n    this.state = {\n      questions: [],\n      page: 1,\n      totalQuestions: 0,\n      categories: {},\n      currentCategory: null\n    };\n  }\n\n  componentDidMount() {\n    this.getQuestions();\n  }\n\n  selectPage(num) {\n    this.state.page = num;\n    this.setState({\n      page: num\n    }, () => this.getQuestions());\n  }\n\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalQuestions / 10);\n\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push(React.createElement(\"span\", {\n        key: i,\n        className: \"page-num \".concat(i === this.state.page ? 'active' : ''),\n        onClick: () => {\n          this.selectPage(i);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, i));\n    }\n\n    return pageNumbers;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"question-view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"categories-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      onClick: () => {\n        this.getQuestions();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Categories\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, Object.keys(this.state.categories).map(id => React.createElement(\"li\", {\n      key: id,\n      onClick: () => {\n        this.getByCategory(id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, this.state.categories[id], React.createElement(\"img\", {\n      className: \"category\",\n      src: \"\".concat(this.state.categories[id], \".svg\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })))), React.createElement(Search, {\n      submitSearch: this.submitSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"questions-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Questions\"), this.state.questions.map((q, ind) => React.createElement(Question, {\n      key: q.id,\n      question: q.question,\n      answer: q.answer,\n      category: this.state.categories[q.category],\n      difficulty: q.difficulty,\n      questionAction: this.questionAction(q.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, this.createPagination())));\n  }\n\n}\n\nexport default QuestionView;","map":{"version":3,"sources":["/Users/aar92_22/Desktop/Udacity/Full_Stack_Developer/FSND/projects/02_trivia_api/starter/frontend/src/components/QuestionView.js"],"names":["React","Component","Question","Search","$","QuestionView","constructor","getQuestions","ajax","url","state","page","type","success","result","setState","questions","totalQuestions","total_questions","categories","currentCategory","current_category","error","alert","getByCategory","id","submitSearch","searchTerm","dataType","contentType","data","JSON","stringify","xhrFields","withCredentials","crossDomain","message","questionAction","action","window","confirm","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","render","Object","keys","map","q","ind","question","answer","category","difficulty"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport '../stylesheets/App.css';\nimport Question from './Question';\nimport Search from './Search';\nimport $ from 'jquery';\n\nclass QuestionView extends Component {\n    constructor(){\n        super();\n        this.state = {\n            questions: [],\n            page: 1,\n            totalQuestions: 0,\n            categories: {},\n            currentCategory: null,\n        }\n    }\n\n    componentDidMount() {\n        this.getQuestions();\n    }\n\n    getQuestions = () => {\n        $.ajax({\n            url: `/questions?page = ${this.state.page }`, \n            type: \"GET\",\n            success: (result) => {\n                this.setState({\n                    questions: result.questions,\n                    totalQuestions: result.total_questions,\n                    categories: result.categories,\n                    currentCategory: result.current_category })\n                return;\n            },\n            error: (error) => {\n                alert('Unable to load questions. Please try your request again')\n                return;\n            }\n        \n        })\n    }\n\n    selectPage(num) {\n        this.state.page = num;\n        this.setState({ page: num }, () => this.getQuestions());\n    }\n   \n    createPagination() {\n        let pageNumbers = [];\n        let maxPage = Math.ceil(this.state.totalQuestions / 10)\n        for (let i = 1; i <= maxPage; i++) {\n            pageNumbers.push(\n                <span\n                    key={i}\n                    className={`page-num ${i === this.state.page ? 'active' : ''}`}\n                    onClick={ () => { this.selectPage(i) } }>\n                    {i}\n                </span>)\n        }\n        return pageNumbers;\n    }\n \n\n    getByCategory= (id) => {\n        $.ajax({\n            url: `/categories/${id}/questions`, //TODO: update request URL\n            type: \"GET\",\n            success: (result) => {\n            this.setState({\n                questions: result.questions,\n                totalQuestions: result.total_questions,\n                currentCategory: result.current_category })\n            return;\n            },\n            error: (error) => {\n            alert('Unable to load questions. Please try your request again')\n            return;\n            }\n        })\n    }\n\n    submitSearch = (searchTerm) => {\n        $.ajax({\n            url: `/questions`, //TODO: update request URL\n            type: \"POST\",\n            dataType: 'json',\n            contentType: 'application/json',\n            data: JSON.stringify({searchTerm: searchTerm}),\n            xhrFields: {\n            withCredentials: true\n            },\n            crossDomain: true,\n            success: (result) => {\n            this.setState({\n                questions: result.questions,\n                totalQuestions: result.total_questions,\n                currentCategory: result.current_category })\n            return;\n            },\n            error: (error) => {\n                    message: error.message\n            alert('Unable to load questions. Please try your request again', message)\n            return;\n            }\n        })\n    }\n\n    questionAction = (id) => (action) => {\n        if(action === 'DELETE') {\n            if(window.confirm('are you sure you want to delete the question?')) {\n            $.ajax({\n                url: `/questions/${id}`, //TODO: update request URL\n                type: \"DELETE\",\n                success: (result) => {\n                this.getQuestions();\n                },\n                error: (error) => {\n                alert('Unable to load questions. Please try your request again')\n                return;\n                }\n            })\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"question-view\">\n                <div className=\"categories-list\">\n                    <h2 onClick={() => {this.getQuestions()}}>Categories</h2>\n                        <ul>\n                        {Object.keys(this.state.categories).map((id, ) => (\n                            <li key={id} onClick={() => {this.getByCategory(id)}}>\n                            {this.state.categories[id]}\n                            <img className=\"category\" src={`${this.state.categories[id]}.svg`}/>\n                            </li>\n                        ))}\n                        </ul>\n                    <Search submitSearch={this.submitSearch}/>\n                </div>\n                <div className=\"questions-list\">\n                    <h2>Questions</h2>\n                    {this.state.questions.map((q, ind) => (\n                        <Question\n                            key={q.id}\n                            question={q.question}\n                            answer={q.answer}\n                            category={this.state.categories[q.category]} \n                            difficulty={q.difficulty}\n                            questionAction={this.questionAction(q.id)}\n                        />\n                    ))}\n                    <div className=\"pagination-menu\">\n                        {this.createPagination()}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default QuestionView;\n"]},"metadata":{},"sourceType":"module"}